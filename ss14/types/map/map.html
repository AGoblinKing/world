<polymer-element name="game-map" extends="game-object">
    <script>
        (function() {
            Polymer("game-map", {
                ready: function() {
                    this.super();
                    this.entities = {};
                    this.renderMap();
                },
                renderMap: function() {
                    Object.keys(this.data.map).forEach(function(key) {
                        var entity = this.data.map[key];
                        
                        if(!Game.state[entity.id]) {
                            this.appendChild(Game.create(entity));
                        }
                    }.bind(this));  
                },
                mapChanged: function() {
                    this.renderMap();
                }
            });
        } ());
    </script>
</polymer-element>